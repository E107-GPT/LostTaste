using System.Collections;
using System.Collections.Generic;
using UnityEngine;

/// <summary>
/// 스킬을 사용하면 아이템을 소모하거나 다른 아이템으로 바뀌는 스킬입니다.
/// </summary>
public abstract class ConsumingSkill : Skill
{
    private string _weaponName = "0000_Fist";

    public string WeaponName { get { return _weaponName; } set { _weaponName = value; } }

    protected override void Init()
    {
        RequiredMp = 0;
        SkillCoolDownTime = 1.0f;
    }

    protected override IEnumerator SkillCoroutine()
    {
        GameObject player = transform.root.gameObject;
        PlayerController playerController = player.GetComponent<PlayerController>();

        yield return null;

        Destroy(this.gameObject);

        Managers.Coroutine.Run(OnConsume(playerController));

        playerController.ObtainWeapon(_weaponName);
        playerController.StateMachine.ChangeState(new IdleState(playerController));
    }

    protected abstract IEnumerator OnConsume(PlayerController playerController);
}
